{% comment %}
  Sections Gallery - Hero Banner with Countdown Timer
  Conversion-optimized hero section with urgency elements
{% endcomment %}

{{ 'sections-gallery-hero-banner.css' | asset_url | stylesheet_tag }}

<div class="sg-hero-banner" 
     style="
       --sg-bg-color: {{ section.settings.background_color }};
       --sg-text-color: {{ section.settings.text_color }};
       --sg-btn-color: {{ section.settings.button_color }};
       --sg-overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
     ">
  
  {% if section.settings.background_image %}
    <div class="sg-hero-background">
      {{ section.settings.background_image | image_url: width: 2400 | image_tag: 
         loading: 'eager',
         class: 'sg-hero-bg-image',
         alt: section.settings.heading }}
      <div class="sg-hero-overlay"></div>
    </div>
  {% endif %}

  <div class="sg-hero-content-wrapper">
    <div class="sg-hero-content">
      
      {% if section.settings.show_badge and section.settings.badge_text != blank %}
        <div class="sg-hero-badge">
          {{ section.settings.badge_text }}
        </div>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h1 class="sg-hero-heading">
          {{ section.settings.heading }}
        </h1>
      {% endif %}

      {% if section.settings.subheading != blank %}
        <p class="sg-hero-subheading">
          {{ section.settings.subheading }}
        </p>
      {% endif %}

      {% if section.settings.show_countdown %}
        <div class="sg-countdown-timer" 
             data-end-date="{{ section.settings.countdown_end_date }}"
             data-end-time="{{ section.settings.countdown_end_time }}">
          <div class="sg-countdown-item">
            <span class="sg-countdown-value" data-days>00</span>
            <span class="sg-countdown-label">Days</span>
          </div>
          <div class="sg-countdown-item">
            <span class="sg-countdown-value" data-hours>00</span>
            <span class="sg-countdown-label">Hours</span>
          </div>
          <div class="sg-countdown-item">
            <span class="sg-countdown-value" data-minutes>00</span>
            <span class="sg-countdown-label">Minutes</span>
          </div>
          <div class="sg-countdown-item">
            <span class="sg-countdown-value" data-seconds>00</span>
            <span class="sg-countdown-label">Seconds</span>
          </div>
        </div>
      {% endif %}

      <div class="sg-hero-buttons">
        {% if section.settings.button_text != blank %}
          <a href="{{ section.settings.button_link }}" 
             class="sg-hero-btn sg-hero-btn-primary">
            {{ section.settings.button_text }}
          </a>
        {% endif %}
        
        {% if section.settings.secondary_button_text != blank %}
          <a href="{{ section.settings.secondary_button_link }}" 
             class="sg-hero-btn sg-hero-btn-secondary">
            {{ section.settings.secondary_button_text }}
          </a>
        {% endif %}
      </div>

      {% if section.settings.show_trust_badges %}
        <div class="sg-trust-badges">
          <div class="sg-trust-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M12 2L15.09 8.26L22 9.27L17 13.14L18.18 22L12 18.56L5.82 22L7 13.14L2 9.27L8.91 8.26L12 2z" fill="currentColor"/>
            </svg>
            <span>4,500+ Happy Customers</span>
          </div>
          <div class="sg-trust-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Secure Payment</span>
          </div>
          <div class="sg-trust-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M13 16H12V12H11M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>30-Day Money Back</span>
          </div>
        </div>
      {% endif %}
      
    </div>
  </div>
</div>

<script>
  {% if section.settings.show_countdown %}
  const timer = document.querySelector('.sg-countdown-timer');
  if (timer) {
    const endDate = timer.getAttribute('data-end-date');
    const endTime = timer.getAttribute('data-end-time');
    
    if (endDate && endTime) {
      const endDateTime = new Date(`${endDate}T${endTime}`);
      
      function updateCountdown() {
        const now = new Date();
        const diff = endDateTime - now;
        
        if (diff <= 0) {
          timer.style.display = 'none';
          return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        timer.querySelector('[data-days]').textContent = String(days).padStart(2, '0');
        timer.querySelector('[data-hours]').textContent = String(hours).padStart(2, '0');
        timer.querySelector('[data-minutes]').textContent = String(minutes).padStart(2, '0');
        timer.querySelector('[data-seconds]').textContent = String(seconds).padStart(2, '0');
      }
      
      updateCountdown();
      setInterval(updateCountdown, 1000);
    }
  }
  {% endif %}
</script>

{% schema %}
{
  "name": "Hero Banner with Countdown",
  "tag": "section",
  "class": "section-hero-banner",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Limited Time Offer!"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Get 30% off on all premium sections - Offer ends soon!"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "🔥⚦...LIMITED TIME"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Image Overlay Opacity",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "default": 30
    },
    {
      "type": "checkbox",
      "id": "show_countdown",
      "label": "Show Countdown Timer",
      "default": true
    },
    {
      "type": "text",
      "id": "countdown_end_date",
      "label": "Countdown End Date",
      "info": "Format: YYYY-MM-DD",
      "default": "2026-12-31"
    },
    {
      "type": "text",
      "id": "countdown_end_time",
      "label": "Countdown End Time",
      "info": "Format: HH:MM:SS",
      "default": "23:59:59"
  },
    {
      "type": "text",
      "id": "button_text",
      "label": "Primary Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Primary Button Link"
    },
    {
      "type": "text",
      "id": "secondary_button_text",
      "label": "Secondary Button Text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "secondary_button_link",
      "label": "Secondary Button Link"
    },
    {
      "type": "checkbox",
      "id": "show_trust_badges",
      "label": "Show Trust Badges",
      "default": true
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#1a1a1a"
    },
    { 
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color",
      "default": "#ff5a5f"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner",
      "category": "Hero"
    }
  ]
}
{% endschema %}

{% comment %}
  Sections Gallery - Hero Banner with Countdown Timer
  Conversion-optimized hero section with urgency elements
{% endcomment %}

{{ 'sections-gallery-hero-banner.css' | asset_url | stylesheet_tag }}

<div class="sf-hero-banner" 
     style="
       --sf-bg-color: {{ section.settings.background_color }};
       --sf-text-color: {{ section.settings.text_color }};
       --sf-btn-color: {{ section.settings.button_color }};
       --sf-overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
      ">
  
  {% if section.settings.background_image %}
    <div class="sf-hero-background">
      {{ section.settings.background_image | image_url: width: 2400 | image_tag: 
         loading: 'eager',
         class: 'sf-hero-bg-image',
         alt: section.settings.heading }}
      <div class="sf-hero-overlay"></div>
    </div>
  {% endif %}

  <div class="sf-hero-content-wrapper">
    <div class="sf-hero-content">
      
      {% if section.settings.show_badge and section.settings.badge_text != blank %}
        <div class="sf-hero-badge">
          {{ section.settings.badge_text }}
        </div>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h1 class="sf-hero-heading">
          {{ section.settings.heading }}
        </h1>
      {% endif %}

      {% if section.settings.subheading != blank %}
        <p class="sf-hero-subheading">
          {{ section.settings.subheading }}
        </p>
      {% endif %}

      {% if section.settings.show_countdown %}
        <div class="sf-countdown-timer" 
             data-end-date="{{ section.settings.countdown_end_date }}"
             data-end-time="{{ section.settings.countdown_end_time }}">
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-days>00</span>
            <span class="sf-countdown-label">Days</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-hours>00</span>
            <span class="sf-countdown-label">Hours</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-minutes>00</span>
            <span class="sf-countdown-label">Minutes</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-seconds>00</span>
            <span class="sf-countdown-label">Seconds</span>
          </div>
        </div>
      {% endif %}

      <div class="sf-hero-buttons">
        {% if section.settings.button_text != blank %}
          <a href="{{ section.settings.button_link }}" 
             class="sf-hero-btn sf-hero-btn-primary">
            {{ section.settings.button_text }}
          </a>
        {% endif %}
        
        {% if section.settings.secondary_button_text != blank %}
          <a href="{{ section.settings.secondary_button_link }}" 
             class="sf-hero-btn sf-hero-btn-secondary">
            {{ section.settings.secondary_button_text }}
          </a>
        {% endif %}
      </div>

      {% if section.settings.show_trust_badges %}
        <div class="sf-hero-trust-badges">
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 20 20">
              <path fill="currentColor" d="M9 11H7l-2 5 2 1h2l2-1-2-5zm2 5v2h-2v-2h2zm0-12v8h-2V4h2z"/>
            </svg>
            <span>{{ section.settings.trust_badge_1 }}</span>
          </div>
          {% if section.settings.trust_badge_2 != blank %}
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 20 20">
              <path fill="currentColor" d="M9 11H7l-2 5 2 1h2l2-1-2-5zm2 5v2h-2v-2h2zm0-12v8h-2V4h2z"/>
            </svg>
            <span>{{ section.settings.trust_badge_2 }}</span>
          </div>
          {% endif %}
          {{ if section.settings.trust_badge_3 != blank %}
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 20 20">
              <path fill="currentColor" d="M9 11H7l-2 5 2 1h2l2-1-2-5zm2 5v2h-2v-2h2zm0-12v8h-2V4h2z"/>
            </svg>
            <span>{{ section.settings.trust_badge_3 }}</span>
          </div>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const countdownTimer = document.querySelector('.sf-countdown-timer');
    
    if (!countdownTimer) return;
    
    const endDate = countdownTimer.getAttribute('data-end-date');
    const endTime = countdownTimer.getAttribute('data-end-time') || '23:59';
    
    if (!endDate) return;
    
    const targetDate = new Date(`${endDate}T$t{endTime}`).getTime();
    
    const daysEl = countdownTimer.querySelector('[data-days]');
    const hoursEl = countdownTimer.querySelector('[data-hours]');
    const minutesEl = countdownTimer.querySelector('[data-minutes]');
    const secondsEl = countdownTimer.querySelector('[data-seconds]');
    
    function updateCountdown() {
      const now = new Date().getTime();
      const difference = targetDate - now;
      
      if (difference < 0) {
        daysEl.textContent = '00';
        hoursEl.textContent = '00';
        minutesEl.textContent = '00';
        secondsEl.textContent = '00';
        return;
      }
      
      const days = Math.floor(difference / (1000 * 60 * 60 * 24));
      const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((difference % (1000 * 60)) / 1000);
      
      daysEl.textContent = String(days).padStart(2, '0');
      hoursEl.textContent = String(hours).padStart(2, '0');
      minutesEl.textContent = String(minutes).padStart(2, '0');
      secondsEl.textContent = String(seconds).padStart(2, '0');
    }
    
    updateCountdown();
    setInterval(updateCountdown, 1000);
  });
</script>

{% schema %}
{"settings":[{"type":"text","id":"heading","label":"Heading","default":"Limited Time Offer!"},{"type":"textarea","id":"subheading","label":"Subheading","default":"Don't miss out on our biggest sale of the year"},{"type":"image_picker","id":"background_image","label":"Background Image"},{"type":"color","id":"background_color","label":"Background Color","default":"#000000"},{"type":"color","id":"text_color","label":"Text Color","default":"#ffffff"},{"type":"color","id":"button_color","label":"Button Color","default":"#ff4458"},{"type":"range","id":"overlay_opacity","label":"Overlay Opacity","min":0,"max":100,"step":5,"unit":"%","default":50},{"type":"checkbox","id":"show_badge","label":"Show Badge","default":true},{"type":"text","id":"badge_text","label":"Badge Text","default":"Free Shipping"},{"type":"header","content":"Buttons"},{"type":"text","id":"button_text","label":"Primary Button Text","default":"Shop Now"},{"type":"url","id":"button_link","label":"Primary Button Link"},{"type":"text","id":"secondary_button_text","label":"Secondary Button Text","default":"Learn More"},{"type":"url","id":"secondary_button_link","label":"Secondary Button Link"},{"type":"header","content":"Countdown Timer"},{"type":"checkbox","id":"show_countdown","label":"Show Countdown Timer","default":true},{"type":"text","id":"countdown_end_date","label":"End Date (YYYY-MM-DD)","info":"Example: 2024-12-31","placeholder":"2024-12-31"},{"type":"text","id":"countdown_end_time","label":"End Time (HH:MM)","info":"Example: 23:59","placeholder":"23:59","default":"23:59"},{"type":"header","content":"Trust Badges"},{"type":"checkbox","id":"show_trust_badges","label":"Show Trust Badges","default":true},{"type":"text","id":"trust_badge_1","label":"Trust Badge 1","default":"Free Shipping"},{"type":"text","id":"trust_badge_2","label":"Trust Badge 2","default":"30-Day Returns"},{"type":"text","id":"trust_badge_3","label":"Trust Badge 3","default":"Secure Checkout"}],"presets":[{"name":"Default","settings":{}}]}
{% endschema %}
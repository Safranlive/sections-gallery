{% comment %}
  Sections Gallery - Hero Banner with Countdown Timer
  Conversion-optimized hero section with urgency elements
{% endcomment %}

{{ 'sections-gallery-hero-banner.css' | asset_url | stylesheet_tag }}

<div class="sf-hero-banner" 
     style="
       --sf-bg-color: {{ section.settings.background_color }};
       --sf-text-color: {{ section.settings.text_color }};
       --sf-btn-color: {{ section.settings.button_color }};
       --sf-overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
      ">
  
  {% if section.settings.background_image %}
    <div class="sf-hero-background">
      {{ section.settings.background_image | image_url: width: 2400 | image_tag: 
         loading: 'eager',
         class: 'sf-hero-bg-image',
         alt: section.settings.heading }}
      <div class="sf-hero-overlay"></div>
    </div>
  {% endif %}

  <div class="sf-hero-content-wrapper">
    <div class="sf-hero-content">
      
      {% if section.settings.show_badge and section.settings.badge_text != blank %}
        <div class="sf-hero-badge">
          {{ section.settings.badge_text }}
        </div>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h1 class="sf-hero-heading">
          {{ section.settings.heading }}
        </h1>
      {% endif %}

      {% if section.settings.subheading != blank %}
        <p class="sf-hero-subheading">
          {{ section.settings.subheading }}
        </p>
      {% endif %}

      {% if section.settings.show_countdown %}
        <div class="sf-countdown-timer" 
             data-end-date="{{ section.settings.countdown_end_date }}"
             data-end-time="{{ section.settings.countdown_end_time }}">
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-days>00</span>
            <span class="sf-countdown-label">Days</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-hours>00</span>
            <span class="sf-countdown-label">Hours</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-minutes>00</span>
            <span class="sf-countdown-label">Minutes</span>
          </div>
          <div class="sf-countdown-item">
            <span class="sf-countdown-value" data-seconds>00</span>
            <span class="sf-countdown-label">Seconds</span>
          </div>
        </div>
      {% endif %}

      <div class="sf-hero-buttons">
        {% if section.settings.button_text != blank %}
          <a href="{{ section.settings.button_link }}" 
             class="sf-hero-btn sf-hero-btn-primary">
            {{ section.settings.button_text }}
          </a>
        {% endif %}
        
        {% if section.settings.secondary_button_text != blank %}
          <a href="{{ section.settings.secondary_button_link }}" 
             class="sf-hero-btn sf-hero-btn-secondary">
            {{ section.settings.secondary_button_text }}
          </a>
        {% endif %}
      </div>

      {% if section.settings.show_trust_badges %}
        <div class="sf-hero-trust-badges">
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5z"/>
            </svg>
            <span>Free Shipping</span>
          </div>
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 22c-4.971 0-9-4.029-9-9V7l9-4 9 4v6c0 4.971-4.029 9-9 9z"/>
            </svg>
            <span>Secure Payment</span>
          </div>
          <div class="sf-trust-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2l-7 12h7v8l7-12h-7V2z"/>
            </svg>
            <span>24/7 Support</span>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
  
  {% if section.settings.show_countdown %}
    <script>
      (function() {
        const timer = document.querySelector('.sf-countdown-timer');
        if (!timer) return;
        
        const endDate = timer.getAttribute('data-end-date');
        const endTime = timer.getAttribute('data-end-time') || '23:59:59';
        
        const targetDate = new Date(`${endDate}T${endTime}`);
        
        function updateCountdown() {
          const now = new Date().getTime();
          const distance = targetDate - now;
          
          if (distance < 0) {
            timer.querySelectorAll('.sf-countdown-value').forEach(el => el.textContent = '00');
            return;
          }
          
          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);
          
          timer.querySelector('[data-days]').textContent = String(days).padStart(2, '0');
          timer.querySelector('[data-hours]').textContent = String(hours).padStart(2, '0');
          timer.querySelector('[data-minutes]').textContent = String(minutes).padStart(2, '0');
          timer.querySelector('[data-seconds]').textContent = String(seconds).padStart(2, '0');
        }
        
        updateCountdown();
        setInterval(updateCountdown, 1000);
      })();
    </script>
  {% endif %}
</div>

<style>
  {% comment %} Critical CSS inlined for immediate rendering {% endcomment %}
  .sf-hero-banner {
    position: relative;
    min-height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--sf-bg-color);
    color: var(--sf-text-color);
  }

  .sf-hero-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .sf-hero-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .sf-hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, var(--sf-overlay-opacity));
  }

  .sf-hero-content-wrapper {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    padding: 0E2px;
    width: 100%;
  }
</style>

{% schema %}
{
  "name": "Sections Gallery Hero Banner",
  "tag": "section",
  "class": "sections-gallery-hero-banner",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Welcome to Sections Gallery"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Build high-converting Shopify sections"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge text",
      "default": "New Launch"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Primary button text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Primary button link"
    },
    {
      "type": "checkbox",
      "id": "show_countdown",
      "label": "Show countdown timer",
      "default": false
    }
  ]
}
{% endschema %}